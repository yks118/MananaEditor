"function"===typeof MananaEditor&&MananaEditor.registerPlugin("embed",function(e,g){this.options=e.deepMerge({regex:{YouTube:[/^https:\/\/(www\.)?youtube\.com\/watch\?v=(?<id>[^& ]+)/i,/^https:\/\/(www\.)?youtube\.be\/(?<id>[^& ]+)/i],Vimeo:[/^https:\/\/(www\.)?vimeo\.com\/(?<id>[0-9]+)/i],Twitch:[/^https:\/\/(www\.)?twitch\.tv\/[^\/]+\/video\/(?<videoID>[0-9]+)/i,/^https:\/\/(www\.)?twitch\.tv\/videos\/(?<videoID>[0-9]+)/i,/^https:\/\/(www\.)?twitch\.tv\/collections\/(?<collectionID>[^\/]+)/i,/^https:\/\/(www\.)?twitch\.tv\/(?<channelID>[^\/]+)/i],
Twitter:[/^https:\/\/(www\.|mobile\.)?twitter\.com\/(?<username>[^\/]+)\/status\/(?<tweetID>[0-9]+)\/?\??/i],Facebook:[/^(?<url>https:\/\/(www\.)?facebook\.com\/[^\/]+\/posts\/[0-9]+)\/?\??/i],Instagram:[/^(?<url>https:\/\/(www\.)?instagram\.com\/p\/[a-zA-Z0-9]+)\/?\??/i]},insertNode:{YouTube:function(b){let a=document.createElement("iframe");a.src="https://www.youtube.com/embed/"+b.id;a.title="YouTube video player";a.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
a.allowFullscreen=!0;a.style.position="absolute";a.style.top="0";a.style.left="0";a.style.width="100%";a.style.height="100%";b=document.createElement("div");b.className="editor-youtube-wrap";b.style.float="none";b.style.clear="both";b.style.width="100%";b.style.height="0";b.style.position="relative";b.style.paddingTop="25px";b.style.paddingBottom="56.25%";b.appendChild(a);return b},Twitter:function(b){var a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";
if("string"===typeof b.username&&"string"===typeof b.tweetID){let c=document.createElement("blockquote");c.className="twitter-tweet editor-twitter-wrap";c.setAttribute("data-theme",a);c.style.maxWidth="100% !important";a=document.createElement("a");a.href="https://twitter.com/"+b.username+"/status/"+b.tweetID;b=document.createElement("script");b.async=!0;b.src="https://platform.twitter.com/widgets.js";c.appendChild(a);c.appendChild(b);return c}return null},Facebook:function(b){let a=document.createElement("div");
a.className="editor-facebook-wrap";let c=document.createElement("div");c.className="fb-post";c.setAttribute("data-href",b.url);c.setAttribute("data-width","350");c.setAttribute("data-show-text","true");c.addEventListener("DOMSubtreeModified",d=>{"IFRAME"===d.target.tagName&&null!==a.querySelector("#fb-root")&&(d.target.style.backgroundColor="#fff",d.target.style.borderRadius="3px",a.querySelector("#fb-root").remove(),null!==a.querySelector("script")&&a.querySelector("script").remove())});b=document.createElement("div");
b.id="fb-root";if(window.FB)a.addEventListener("DOMNodeInserted",d=>{d.target===d.currentTarget&&FB.XFBML.parse(d.target)});else{let d=document.createElement("script");d.async=!0;d.defer=!0;d.crossOrigin="anonymous";d.src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v13.0";d.nonce="WM9CWvy4";a.appendChild(d)}a.appendChild(c);a.appendChild(b);return a},Instagram:function(b){let a=document.createElement("div");a.className="editor-instagram-wrap";a.style.position="relative";a.style.paddingBottom=
"120%";a.style.height="0";a.style.overflow="hidden";let c=document.createElement("iframe");c.src=b.url+"/embed";c.style.position="absolute";c.style.top="0";c.style.left="0";c.style.width="100%";c.style.height="100%";a.appendChild(c);return a},Vimeo:function(b){let a=document.createElement("div");a.className="editor-vimeo-wrap";a.style.position="relative";a.style.paddingBottom="56.25%";a.style.height="0";a.style.maxWidth="100%";a.style.overflow="hidden";let c=document.createElement("iframe");c.src=
"https://player.vimeo.com/video/"+b.id;c.allow="autoplay; fullscreen; picture-in-picture";c.allowFullscreen=!0;c.style.position="absolute";c.style.top="0";c.style.left="0";c.style.width="100%";c.style.height="100%";a.appendChild(c);return a},Twitch:function(b){let a=document.createElement("div");a.className="editor-twitch-wrap";a.style.position="relative";a.style.paddingBottom="56.25%";a.style.height="0";if("string"===typeof b.videoID)b="video="+b.videoID;else if("string"===typeof b.channelID)b="channel="+
b.channelID;else if("string"===typeof b.collectionID)b="collection="+b.collectionID;else return null;let c=document.createElement("iframe");c.src="https://player.twitch.tv/?"+b+"&parent="+window.location.hostname+"&autoplay=false";c.allowFullscreen=!0;c.style.position="absolute";c.style.top="0";c.style.left="0";c.style.width="100%";c.style.height="100%";a.appendChild(c);return a}}},g);e._embedSearchRegex=function(b){let a=null;for(let c in e.options.plugins.embed.regex)for(let d=0;d<e.options.plugins.embed.regex[c].length;d++){let f=
b.match(e.options.plugins.embed.regex[c][d]);if(f){a={key:c,matches:f.groups};break}}return a};e.addEventListener("paste",b=>{var a=b.clipboardData;-1!==a.types.indexOf("text/plain")&&(a=a.getData("text/plain"),a.match(/^https?:\/\//i)&&(a=e._embedSearchRegex(a)))&&(a=e.options.plugins.embed.insertNode[a.key](a.matches),null!==a&&(b.preventDefault(),b.stopImmediatePropagation(),b=document.createElement("br"),a.appendChild(b),e.insertNode(a),e.insertNodeNewLine()))});return this.options});
